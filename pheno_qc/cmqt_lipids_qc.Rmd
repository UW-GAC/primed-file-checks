### CMQT Lipids QC 

This document performs quality control checks on the cmqt_lipids data sets. Specific checks are determined through a collaborative effort between the CMQT sub-working group, the Phenotype Harmonization Working Group, and the CC. 

```{r}
# Read in data

test_df <- read.table(file = '/home/rstudio/primed-file-checks/pheno_qc/test_data/cmqt_lipids.tsv', sep = '\t', header = TRUE)
```

### CMQT Lipids QC limits
```{r}
# Set biologically implausible values for blood pressure

vars <- c('triglycerides_1')
min_values <- c(0) 
max_values <- c(600)

df <- data.frame(vars, min_values, max_values)

kable(df, col.names = c('Variable', 'Min Value', 'Max Value'),  caption = "Min and max extreme values for lipids variables")
```

### CMQT Lipids QC checks
```{r}
# Check for extreme values in dataset

this_table <- as.data.frame(test_df) # for testing

for (i in 1:length(vars)) {
  var_name = vars[i]
  
  this_variable <- eval(parse(text=paste0("this_table$", var_name)))
  
  max <- df[i, 3]
  min <- df[i, 2]
  
  if(sum(this_variable > max) + sum(this_variable < min) > 0) {
    print(paste(sum(this_variable > max), ' samples with ', var_name, '>', max))
    print(paste(sum(this_variable < min), ' samples with ', var_name, '<', min))
  }
}
```
